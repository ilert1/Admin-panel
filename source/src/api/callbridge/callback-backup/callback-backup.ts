/**
 * Generated by orval v7.7.0 ðŸº
 * Do not edit manually.
 * BlowFish - CallBridge API Service
 * OpenAPI spec version: develop
 */
import type {
    ApiResponseCallbackHistoryRestoreResult,
    ApiResponseOffsetPaginationCallbackHistoryBackup,
    BodyCallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePost,
    CallbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetParams,
    CallbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetParams,
    CallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostParams,
    HTTPValidationError
} from "../blowFishCallBridgeAPIService.schemas";

import { authFetch } from "../../../helpers/orvalAuthFetchMiddleware";

/**
 * @summary Get list all backup files with callback history records
 */
export type callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse200 = {
    data: ApiResponseOffsetPaginationCallbackHistoryBackup;
    status: 200;
};

export type callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse422 = {
    data: HTTPValidationError;
    status: 422;
};

export type callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponseComposite =
    | callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse200
    | callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse422;

export type callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse =
    callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponseComposite & {
        headers: Headers;
    };

export const getCallbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetUrl = (
    params?: CallbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetParams
) => {
    const normalizedParams = new URLSearchParams();

    Object.entries(params || {}).forEach(([key, value]) => {
        if (value !== undefined) {
            normalizedParams.append(key, value === null ? "null" : value.toString());
        }
    });

    const stringifiedParams = normalizedParams.toString();

    return stringifiedParams.length > 0
        ? `https://example.com/callbridge/v1/history/backup?${stringifiedParams}`
        : `https://example.com/callbridge/v1/history/backup`;
};

export const callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGet = async (
    params?: CallbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetParams,
    options?: RequestInit
): Promise<callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse> => {
    return authFetch<callbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetResponse>(
        getCallbackHistoryBackupEndpointsListBackupsCallbridgeV1HistoryBackupGetUrl(params),
        {
            ...options,
            method: "GET"
        }
    );
};

/**
 * @summary Download archive history file from S3
 */
export type callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse200 = {
    data: unknown;
    status: 200;
};

export type callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse422 = {
    data: HTTPValidationError;
    status: 422;
};

export type callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponseComposite =
    | callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse200
    | callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse422;

export type callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse =
    callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponseComposite & {
        headers: Headers;
    };

export const getCallbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetUrl = (
    params: CallbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetParams
) => {
    const normalizedParams = new URLSearchParams();

    Object.entries(params || {}).forEach(([key, value]) => {
        if (value !== undefined) {
            normalizedParams.append(key, value === null ? "null" : value.toString());
        }
    });

    const stringifiedParams = normalizedParams.toString();

    return stringifiedParams.length > 0
        ? `https://example.com/callbridge/v1/history/backup/download?${stringifiedParams}`
        : `https://example.com/callbridge/v1/history/backup/download`;
};

export const callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGet = async (
    params: CallbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetParams,
    options?: RequestInit
): Promise<callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse> => {
    return authFetch<callbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetResponse>(
        getCallbackHistoryBackupEndpointsDownloadBackupCallbridgeV1HistoryBackupDownloadGetUrl(params),
        {
            ...options,
            method: "GET"
        }
    );
};

/**
 * Restoring callback history records from a JSONL GZIP backup.

Supports three restoration strategies:

    MERGE: (default): Only inserts new records that don't exist
    SKIP: Skips the entire restore if any records already exist
    OVERWRITE: Deletes existing records before inserting all from backup

Request parameters:

    file: Required - The backup file to restore (GZIP-compressed JSONL format)
    strategy: Optional - Restoration strategy (MERGE|SKIP|OVERWRITE), defaults to MERGE

Returns:
    CallbackHistoryRestoreResult object containing:

    total: Total records in backup
    inserted: Number of new records inserted
    deleted: Number of existing records deleted (OVERWRITE only)
    skipped: Number of records skipped (due to existing or strategy)
 * @summary Restoring callback history records from a JSONL GZIP backup.
 */
export type callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse200 = {
    data: ApiResponseCallbackHistoryRestoreResult;
    status: 200;
};

export type callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse422 = {
    data: HTTPValidationError;
    status: 422;
};

export type callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponseComposite =
    | callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse200
    | callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse422;

export type callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse =
    callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponseComposite & {
        headers: Headers;
    };

export const getCallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostUrl = (
    params?: CallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostParams
) => {
    const normalizedParams = new URLSearchParams();

    Object.entries(params || {}).forEach(([key, value]) => {
        if (value !== undefined) {
            normalizedParams.append(key, value === null ? "null" : value.toString());
        }
    });

    const stringifiedParams = normalizedParams.toString();

    return stringifiedParams.length > 0
        ? `https://example.com/callbridge/v1/history/backup/restore?${stringifiedParams}`
        : `https://example.com/callbridge/v1/history/backup/restore`;
};

export const callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePost = async (
    bodyCallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePost: BodyCallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePost,
    params?: CallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostParams,
    options?: RequestInit
): Promise<callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse> => {
    const formData = new FormData();
    formData.append("file", bodyCallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePost.file);

    return authFetch<callbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostResponse>(
        getCallbackHistoryBackupEndpointsRestoreBackupCallbridgeV1HistoryBackupRestorePostUrl(params),
        {
            ...options,
            method: "POST",
            body: formData
        }
    );
};
